import{s as a,e as i,l as s,y as t,m as l,u as e,h as c}from"../index.4bf87375.js";import{A as n,P as o}from"./Pagination.45513a40.js";import{L as r}from"./LoadingIndicator.f4e3707b.js";import{a as d,b as v}from"./article.12519bc5.js";import"./constants.74db8a6c.js";function g(e){const[c,n]=s([]);return t(()=>{!async function(){n(await async function(){try{const{data:i}=await a.get("tags");return i.tags}catch(s){throw i(s,"error while fetching tags")}}())}()},[]),l`<div class="sidebar"><p>Popular Tags</p><div class="tag-list">${c.map(a=>l`<a key=${a} href="#" class="tag-pill tag-default" onClick=${()=>e.onClick(a)}>${a}</a>`)}</div></div>`}export default function(){const a=e(a=>a.isAuthenticated),[i,p]=s([]),[u,$]=s(0),[f,m]=s(1),[h,b]=s(""),[k,w]=s(""),[y,C]=s(!1);return c(()=>{b(a?"personal":"global")},[a]),t(()=>{!async function(){C(!0);let a=[],i=0;switch(h){case"personal":({articles:a,articlesCount:i}=await v(f));break;default:({articles:a,articlesCount:i}=await d(f,"tag"===h?{tag:k}:void 0))}p(a),$(i),C(!1)}()},[h,f,k]),l`<div class="home-page">${!a&&l`<div class="banner"><div class="container"><h1 class="logo-font">conduit</h1><p>A place to share your knowledge.</p></div></div>`}<div class="container page"><div class="row"><div class="col-md-9"><div class="feed-toggle"><ul class="nav nav-pills outline-active">${a&&l`<li class="nav-item"><a class=${"nav-link "+("personal"===h?"active":"")} href="#" onClick=${()=>b("personal")}>Your Feed</a></li>`}<li class="nav-item"><a class=${"nav-link "+("global"===h?"active":"")} href="#" onClick=${()=>b("global")}>Global Feed</a></li>${"tag"===h&&l`<li class="nav-item"><a class="nav-link active" href="#"># ${k}</a></li>`}</ul></div>${y?l`<${r} show=${y} style=${{margin:"1rem auto",display:"flex"}} width="2em"/>`:i.length>0?i.map(a=>l`<${n} key=${a.slug} article=${a}/>`):l`<div class="article-preview">No articles are here... yet.</div>`}<${o} count=${u} page=${f} setPage=${m}/></div><div class="col-md-3"><${g} onClick=${a=>{b("tag"),w(a)}}/></div></div></div></div>`}